# CloudWatch Logging & Monitoring Configuration
# Add these to your .env files for production deployments

# === CLOUDWATCH LOGGING ===
# Log group name (must exist in CloudWatch)
CLOUDWATCH_LOG_GROUP=/ecs/sprintlite-app

# Log retention period in days
# 7 = 7 days (default)
# 14 = 14 days
# 30 = 30 days
# 90 = 90 days (for compliance)
# Choose based on cost/compliance needs
CLOUDWATCH_LOG_RETENTION_DAYS=7

# CloudWatch stream prefix (helps organize logs)
CLOUDWATCH_LOG_STREAM_PREFIX=ecs

# AWS region for CloudWatch
CLOUDWATCH_REGION=us-east-1

# === STRUCTURED LOGGING ===
# Enable JSON structured logging (recommended for CloudWatch)
ENABLE_STRUCTURED_LOGGING=true

# Log level (debug, info, warn, error)
# production: info or warn (less verbose)
# staging: info (balanced)
# development: debug (most verbose)
LOG_LEVEL=info

# Include request IDs in logs (for tracing)
ENABLE_REQUEST_ID=true

# Include stack traces in error logs
INCLUDE_ERROR_STACK=true

# === CLOUDWATCH METRICS ===
# Namespace for custom metrics
CLOUDWATCH_METRIC_NAMESPACE=sprintlite-app

# Enable custom metric tracking
ENABLE_CUSTOM_METRICS=true

# === ALARMS & ALERTS ===
# SNS Topic ARN for alarm notifications
# Format: arn:aws:sns:us-east-1:ACCOUNT-ID:topic-name
CLOUDWATCH_SNS_TOPIC_ARN=arn:aws:sns:us-east-1:123456789012:sprintlite-alerts

# Alarm thresholds
# Error count alarm triggers when exceeded in 5 minutes
ALARM_ERROR_THRESHOLD=10

# Warning count alarm triggers when exceeded in 5 minutes
ALARM_WARNING_THRESHOLD=20

# Slow request alarm (requests > Xms count)
ALARM_SLOW_REQUEST_THRESHOLD_MS=1000
ALARM_SLOW_REQUEST_COUNT=5

# HTTP error alarm (4xx, 5xx responses)
ALARM_HTTP_ERROR_THRESHOLD=5

# === DASHBOARD ===
# CloudWatch dashboard name
CLOUDWATCH_DASHBOARD_NAME=sprintlite-app-dashboard

# === PERFORMANCE TRACKING ===
# Track API response times
TRACK_API_RESPONSE_TIME=true

# Track database query times
TRACK_DB_QUERY_TIME=true

# Track authentication events
TRACK_AUTH_EVENTS=true

# === LOGGING FILTERS ===
# CloudWatch Insights query examples:
# 1. Count errors by level:
#    fields level | stats count() by level
#
# 2. Average response time:
#    fields duration | stats avg(duration)
#
# 3. Errors in last hour:
#    fields @timestamp, message | filter level = 'error' | sort @timestamp desc
#
# 4. Slow endpoints:
#    fields endpoint, duration | filter duration > 1000 | stats avg(duration) by endpoint
#
# 5. Failed authentication:
#    fields userId, success | filter event = 'login_failed' | stats count() by userId
